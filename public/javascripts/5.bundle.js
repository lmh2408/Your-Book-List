(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{104:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isAsyncIterable=e.isAsyncGenerator=e.isAsync=void 0;var o,r=n(211),i=(o=r)&&o.__esModule?o:{default:o};function a(t){return"AsyncFunction"===t[Symbol.toStringTag]}e.default=function(t){if("function"!=typeof t)throw new Error("expected a function");return a(t)?(0,i.default)(t):t},e.isAsync=a,e.isAsyncGenerator=function(t){return"AsyncGenerator"===t[Symbol.toStringTag]},e.isAsyncIterable=function(t){return"function"==typeof t[Symbol.asyncIterator]}},208:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=u(n(209)),r=u(n(210)),i=u(n(104)),a=u(n(214));function u(t){return t&&t.__esModule?t:{default:t}}e.default=(0,a.default)(function(t,e){if(e=(0,o.default)(e),!Array.isArray(t))return e(new Error("First argument to waterfall must be an array of functions"));if(!t.length)return e();var n=0;function a(e){(0,i.default)(t[n++])(...e,(0,r.default)(u))}function u(o,...r){if(!1!==o)return o||n===t.length?e(o,...r):void a(r)}a([])}),t.exports=e.default},209:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){function e(...e){if(null!==t){var n=t;t=null,n.apply(this,e)}}return Object.assign(e,t),e},t.exports=e.default},210:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return function(...e){if(null===t)throw new Error("Callback was already called.");var n=t;t=null,n.apply(this,e)}},t.exports=e.default},211:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if((0,i.isAsync)(t))return function(...e){const n=e.pop(),o=t.apply(this,e);return u(o,n)};return(0,o.default)(function(e,n){var o;try{o=t.apply(this,e)}catch(t){return n(t)}if(o&&"function"==typeof o.then)return u(o,n);n(null,o)})};var o=a(n(212)),r=a(n(213)),i=n(104);function a(t){return t&&t.__esModule?t:{default:t}}function u(t,e){return t.then(t=>{c(e,null,t)},t=>{c(e,t&&t.message?t:new Error(t))})}function c(t,e,n){try{t(e,n)}catch(t){(0,r.default)(t=>{throw t},t)}}t.exports=e.default},212:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return function(...e){var n=e.pop();return t.call(this,e,n)}},t.exports=e.default},213:function(t,e,n){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.fallback=a,e.wrap=u;var o,r=e.hasSetImmediate="function"==typeof t&&t,i=e.hasNextTick="object"==typeof n&&"function"==typeof n.nextTick;function a(t){setTimeout(t,0)}function u(t){return(e,...n)=>t(()=>e(...n))}o=r?t:i?n.nextTick:a,e.default=u(o)}).call(this,n(44).setImmediate,n(30))},214:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e=t.length){if(!e)throw new Error("arity is undefined");function n(...n){return"function"==typeof n[e-1]?t.apply(this,n):new Promise((o,r)=>{n[e-1]=(t,...e)=>{if(t)return r(t);o(e.length>1?e:e[0])},t.apply(this,n)})}return Object.defineProperty(n,"name",{value:`awaitable(${t.name})`}),n},t.exports=e.default},221:function(t,e,n){"use strict";n.r(e);var o=n(0),r=n.n(o),i=n(5);n(208);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function c(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,l(e).call(this,t))}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,r.a.Component),n=e,(o=[{key:"render",value:function(){var t=this;return r.a.createElement("div",{className:"listBook-navButtons"},function(){if(t.props.booksLength>0&&t.props.booksLength<t.props.count){var e=[];return 0!=t.props.position.skip&&e.push(r.a.createElement("button",{"data-type":"prev",onClick:t.props.handleNavigate,key:"p"},"<")),t.props.position.skip<t.props.count-t.props.position.limit&&e.push(r.a.createElement("button",{"data-type":"next",onClick:t.props.handleNavigate,key:"n"},">")),e}}())}}])&&u(n.prototype,o),i&&u(n,i),e}();var p=n(9);function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"default",function(){return k});var g=r.a.Fragment,k=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=function(t,e){return!e||"object"!==m(e)&&"function"!=typeof e?y(t):e}(this,h(e).call(this,t)),v(y(n),"getBookList",function(t,e,o,r){!function(t,e,n,o,r){var i={method:"GET",credentials:"same-origin",signal:o},a="?skip=".concat(n.skip,"&limit=").concat(n.limit,"&status=").concat(e,"&name=").concat(t);fetch("/api/booklistall"+a,i).then(function(t){return t.ok?t.json():Promise.reject(t.status)}).then(function(t){r(null,t)}).catch(function(t){"AbortError"!==t.name&&r(t,null)})}(t,e,o,r,function(t,e){if(t)return 401==t?n.context.setAppContext("authenticated",!1):n.setState({error:t});n.setState({books:e.list,count:e.count})})}),v(y(n),"showSpecific",function(){n.setState({position:{skip:0,limit:10}}),n.getBookList(n.state.input.name,n.state.input.filter,n.state.position,n.abortSignal.signal)}),v(y(n),"handleInput",function(t){var e=t.target.name,o=t.target.value;n.setState(function(t){var n=t.input;return n[e]=o,{input:n}})}),v(y(n),"handleNavigate",function(t){var e=t.target.dataset.type;n.setState(function(t){var o=t.position;t.books;return"prev"==e&&(o.skip=o.skip-o.limit,o.skip<0&&(o.skip=0)),"next"==e&&(o.skip=o.skip+o.limit),n.getBookList(n.state.input.name,n.state.input.filter,o,n.abortSignal.signal),document.querySelector(".listBook-inputContainer").scrollIntoView(),{position:o}})}),n.state={error:null,position:{skip:0,limit:10},books:[],count:0,input:{filter:"all",name:""}},n.abortSignal=new AbortController,n}var n,o,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(e,r.a.Component),n=e,(o=[{key:"componentDidMount",value:function(){document.title="Your-Book-List/List of books",this.getBookList(this.state.input.name,this.state.input.filter,this.state.position,this.abortSignal.signal)}},{key:"componentWillUnmount",value:function(){this.abortSignal.abort()}},{key:"render",value:function(){if(this.state.error)return r.a.createElement("p",{className:"listBook-error"},"Error ",this.state.error);var t=this.state.books,e=(this.state.limit,r.a.createElement(f,{booksLength:t.length,count:this.state.count,position:this.state.position,handleNavigate:this.handleNavigate}));return r.a.createElement(g,null,r.a.createElement("div",{className:"listBook-inputContainer"},r.a.createElement("div",null,r.a.createElement("select",v({name:"listBook-filter",id:"listBook-filter",value:this.state.input.filter,onChange:this.handleInput},"name","filter"),["all","reading","plan-to-read","finished"].map(function(t,e){return r.a.createElement("option",{value:t,key:e},t)})),r.a.createElement("span",null,"v")),r.a.createElement("input",{type:"text",placeholder:"Filter by names",value:this.state.input.name,onChange:this.handleInput,name:"name"}),r.a.createElement("button",{onClick:this.showSpecific},"Show"),r.a.createElement("p",null,this.state.count," results")),r.a.createElement(g,null,e),r.a.createElement("div",{className:"listBook-listContainer"},0!==t.length?t.map(function(t,e){return r.a.createElement(i.b,{to:"/book/item/".concat(t.bookId),key:e,title:t.bookName},r.a.createElement("div",{className:"listBook-itemContainer"},r.a.createElement("div",{className:"listBook-thumbnail"},r.a.createElement("img",{src:"http://www.gutenberg.org/cache/epub/".concat(t.bookId,"/pg").concat(t.bookId,".cover.small.jpg"),alt:t.bookName})),r.a.createElement("div",{className:"listBook-itemInfo"},r.a.createElement("div",{className:"listBook-itemName"},r.a.createElement("p",null,t.bookName)),r.a.createElement("div",{className:"listBook-itemStatus"},r.a.createElement("p",null,t.status))),r.a.createElement("hr",null)))}):r.a.createElement("p",{className:"listBook-noItem"},"No book in list to display.")),r.a.createElement(g,null,e))}}])&&d(n.prototype,o),a&&d(n,a),e}();v(k,"contextType",p.a)},30:function(t,e){var n,o,r=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(t){o=a}}();var c,l=[],s=!1,f=-1;function p(){s&&c&&(s=!1,c.length?l=c.concat(l):f=-1,l.length&&m())}function m(){if(!s){var t=u(p);s=!0;for(var e=l.length;e;){for(c=l,l=[];++f<e;)c&&c[f].run();f=-1,e=l.length}c=null,s=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function h(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new d(t,e)),1!==l.length||s||u(m)},d.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=h,r.addListener=h,r.once=h,r.off=h,r.removeListener=h,r.removeAllListeners=h,r.emit=h,r.prependListener=h,r.prependOnceListener=h,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},44:function(t,e,n){(function(t){var o=void 0!==t&&t||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;function i(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new i(r.call(setTimeout,o,arguments),clearTimeout)},e.setInterval=function(){return new i(r.call(setInterval,o,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(o,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(61),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(13))},61:function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var o,r,i,a,u,c=1,l={},s=!1,f=t.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(t);p=p&&p.setTimeout?p:t,"[object process]"==={}.toString.call(t.process)?o=function(t){e.nextTick(function(){d(t)})}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((i=new MessageChannel).port1.onmessage=function(t){d(t.data)},o=function(t){i.port2.postMessage(t)}):f&&"onreadystatechange"in f.createElement("script")?(r=f.documentElement,o=function(t){var e=f.createElement("script");e.onreadystatechange=function(){d(t),e.onreadystatechange=null,r.removeChild(e),e=null},r.appendChild(e)}):o=function(t){setTimeout(d,0,t)}:(a="setImmediate$"+Math.random()+"$",u=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&d(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",u,!1):t.attachEvent("onmessage",u),o=function(e){t.postMessage(a+e,"*")}),p.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return l[c]=r,o(c),c++},p.clearImmediate=m}function m(t){delete l[t]}function d(t){if(s)setTimeout(d,0,t);else{var e=l[t];if(e){s=!0;try{!function(t){var e=t.callback,o=t.args;switch(o.length){case 0:e();break;case 1:e(o[0]);break;case 2:e(o[0],o[1]);break;case 3:e(o[0],o[1],o[2]);break;default:e.apply(n,o)}}(e)}finally{m(t),s=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(13),n(30))}}]);